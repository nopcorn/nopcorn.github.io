<!DOCTYPE html><html lang="en" ><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="Getting Started Compromising CI/CD Pipelines with Github Actions" /><meta name="author" content="nopcorn" /><meta property="og:locale" content="en_US" /><meta name="description" content="Compromising CI/CD pipelines can be very fruitful" /><meta property="og:description" content="Compromising CI/CD pipelines can be very fruitful" /><link rel="canonical" href="http://0.0.0.0:4000/2024/12/17/getting-started-compromising-github-actions" /><meta property="og:url" content="http://0.0.0.0:4000/2024/12/17/getting-started-compromising-github-actions" /><meta property="og:site_name" content="nopcorn" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2024-12-17T00:00:00+00:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Getting Started Compromising CI/CD Pipelines with Github Actions" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"nopcorn"},"dateModified":"2024-12-17T00:00:00+00:00","datePublished":"2024-12-17T00:00:00+00:00","description":"Compromising CI/CD pipelines can be very fruitful","headline":"Getting Started Compromising CI/CD Pipelines with Github Actions","mainEntityOfPage":{"@type":"WebPage","@id":"http://0.0.0.0:4000/2024/12/17/getting-started-compromising-github-actions"},"url":"http://0.0.0.0:4000/2024/12/17/getting-started-compromising-github-actions"}</script><title> Getting Started Compromising CI/CD Pipelines with Github Actions - nopcorn</title><link rel="shortcut icon" href="/favicon.png"><link rel="alternate" type="application/atom+xml" title="nopcorn" href="/atom.xml"><link rel="alternate" type="application/json" title="nopcorn" href="http://0.0.0.0:4000/feed.json" /><link rel="sitemap" type="application/xml" title="sitemap" href="/sitemap.xml" /><style> *,:after,:before{box-sizing:border-box;background-color:inherit;color:inherit;margin:0;padding:0}body{font-family:system-ui,sans-serif;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;line-height:1.5;font-size:1rem;color:#16171a}hr{background:#dfdfdf !important;margin-top:1rem;margin-bottom:1rem}nav ul{border-right:1px solid #edf2f7}a{color:#000;text-decoration-skip-ink:auto;text-decoration:underline}pre{margin:.5rem 0;padding:.5rem}.post p{margin:.5rem 0}.post h1,.post h2,.post h3,.post h4{margin:1rem 0}.post h2:first-child,.project h2:first-child,.photo h2:first-child{margin-top:0}.meta{margin-bottom:1rem}code,pre{background:#ecedee}code{padding:.1rem;padding-left:.3rem;padding-right:.3rem}pre code{border:none}pre{padding:1rem;overflow-x:auto}img{max-width:100%}hr{background:#000;height:1px;border:0}header{flex-basis:10rem;flex-grow:1;position:relative}header a{text-decoration:none}header li{margin-bottom:.2rem;text-align:right;margin-right:2rem}header a.active{font-weight:bold}header,section{padding:1rem}blockquote{background-color:#eee;padding:1rem;margin-top:1rem;margin-bottom:1rem;border-left:5px solid #ddd}h1,h2,h3,h4,h5{line-height:1;margin:1rem 0;font-weight:600}section{margin-top:.45rem}section h1:first-child{margin-top:0}strong,b{font-weight:bold}.photos ul{list-style:none}.photos li{margin-bottom:1.5rem}.photo picture,.project picture{margin-bottom:.5rem}.posts ul,header ul{list-style:none}blockquote ul{margin-left:1rem}.posts li{align-items:center;display:flex;justify-content:space-between;margin-bottom:.5rem}.posts li a,.posts li div,.projects li a{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-decoration:none}.posts li time,.projects li time{padding-left:1rem;white-space:nowrap;font-variant-numeric:tabular-nums}.post ul,.project ul,.post ol{list-style-position:inside}main{display:flex;flex-wrap:wrap;max-width:70rem;margin:2rem auto;padding:1rem}@media screen and (max-width: 45rem){header li{display:inline;margin-right:1rem}.logo{padding-bottom:1rem}header ul{border-bottom:1px solid #edf2f7;padding-bottom:2rem}nav ul{border-right:0px}.photos ul{margin-top:.5rem}#logo{width:5rem}}section{flex-basis:0;flex-grow:999;min-width:70%;display:flex;flex-direction:column}figcaption{font-size:smaller}@media print{.no-print,.no-print *{display:none !important}}code{font-size:.75rem;vertical-align:text-bottom}blockquote code{background:#fff}pre code{display:inline-block}pre{white-space:pre-wrap}#logo{border-radius:50% !important}pre:has(>.language-hack-nowrap){white-space:pre}#topnav{margin-top:1rem}.social-icons{width:2.5rem}blockquote ul,blockquote ol{list-style-position:unset !important}</style></head><body><main><header aria-hidden="true" class="no-print"> <a href="/"> <!--<h1 class="logo" style="margin-top:0;font-family:monospace">\x90corn</h1>--> <img id="logo" src="/assets/logo.jpeg"/> </a><nav id="topnav" role="navigation" aria-hidden="true"><ul><li><a href="/" >posts</a></li><li><a href="/about" >about</a></li><li><a href="/atom.xml" >rss</a></li></ul></nav></header><section class="post"><h2>Getting Started Compromising CI/CD Pipelines with Github Actions</h2><span class="meta"><time datetime="2024-12-17T00:00:00+00:00">December 17, 2024</time> &middot; <a href="/tag/cicd">cicd</a>, <a href="/tag/github">github</a>, <a href="/tag/rascalrunner">rascalrunner</a>, <a href="/tag/runners">runners</a>, <a href="/tag/workflow">workflow</a>, <a href="/tag/redteam">redteam</a>, <a href="/tag/actions">actions</a></span><blockquote><ul><li>CI/CD pipelines are an excellent place for attackers to gain secrets and access to sensitive environments</li><li>I wrote a tool to help compromise Github Actions based workflows called <a href="https://github.com/nopcorn/RascalRunner">RascalRunner</a></li></ul></blockquote><p>Modern development teams increasingly rely on Continuous Integration/Continuous Deployment (CI/CD) pipelines, and GitHub Actions is often the platform of choice. While these workflows streamline testing and deployment, they also introduce complex security considerations that attackers can leverage. Adversaries have discovered that compromising these privileged pipelines can yield access to sensitive resources like environment secrets, cloud credentials, or direct network access through self-hosted runners. In many ways, they are the new network edge.</p><p>In this post, we’ll delve into the technical underpinnings of malicious GitHub Actions workflows, focusing on how attackers can identify and exploit CI/CD pipelines with a compromised GitHub personal access token (PAT). We’ll also discuss the difference between GitHub-hosted and self-hosted runners, why the latter pose significant risk, and how red teaming tools like <a href="https://github.com/nopcorn/RascalRunner">RascalRunner</a> enable automated reconnaissance and covert workflow deployment to test an organization’s CI/CD security posture.</p><h2 id="actions--runners">Actions &amp; Runners</h2><p>https://chuniversiteit.nl/papers/rise-and-fall-of-ci-services-in-github</p><p>Shortly after it’s acquisition by Microsoft in 2018, Github launched Github Actions as a means to consolidate the build, integration, and deployment needs of developers. Actions allow developers to define workflows stored as YAML files within a repository’s <code>.github/workflows</code> directory. These workflows can be triggered by various events—pushes, pull requests, schedule timers, or manual invocation. Each workflow runs on a “runner”—a unit of compute that executes the steps, commands, and scripts defined in the workflow. Workflows interact with cloud services and other platforms to perform actions like storing freshly built containers, deploying code, and configuring services via Terraform or other IaC strategies.</p><p><img src="/assets/img/github-actions-diagram.png" alt="" /></p><p>By default, workflows run on GitHub-hosted runners that are freshly provisioned virtual machines in US-based Azure regions (<a href="https://github.com/orgs/community/discussions/24969">probably</a>). Once a job finishes, logs are pushed back to the actions controller and the runner is typically destroyed, limiting persistent footholds.</p><p>However, Github Actions supports <a href="https://docs.github.com/en/actions/hosting-your-own-runners/managing-self-hosted-runners/about-self-hosted-runners">self-hosted runners</a> to access private and sensitive networks. Some of these can be deployed persistently, meaning the same runner is used across multiple pipelines and sticks around even if there are no workloads to process.</p><h2 id="compromised-runner">Compromised Runner</h2><h2 id="defensive-strategies">Defensive Strategies</h2><h2 id="rascalrunner">RascalRunner</h2></section></main><script defer src='https://static.cloudflareinsights.com/beacon.min.js' data-cf-beacon='{"token": "8156489757ba4337bde96df7a40dcc1b"}'></script></body></html>
